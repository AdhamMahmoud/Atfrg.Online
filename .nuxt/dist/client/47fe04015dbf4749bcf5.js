(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{327:function(t,e,n){var content=n(337);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(29).default)("8ff8c428",content,!0,{sourceMap:!1})},333:function(t,e,n){"use strict";n(13);var r={data:function(){return{isPlay:!1,trailer_path:" ",year:"",films:[]}},computed:{playerOptions:function(){return{captions:{active:!1},controls:["play-large"]}}},methods:{handleSearch:function(){var t=this;this.films=[],fetch("https://www.omdbapi.com/?i="+this.$props.imdbId+"&apikey=527f9c9a").then((function(t){return t.json()})).then((function(e){t.films=e,t.year=t.GetYear(e.Released)}))},runTrailer:function(t){var e=this;this.isPlay=!0,setTimeout((function(){e.runTrailerNow(t)}),1500)},GetYear:function(t){var e=new Date(t),n=(("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2),e.getFullYear());return this.movieyear=n,n},runTrailerNow:function(t){this.isPlay&&this.$refs[t]&&(this.trailer_path=this.$props.trailer,this.$refs[t].player.play(),this.$refs[t+"poster"].style="display:block")},stopTrailer:function(t){this.isPlay=!1,this.$refs[t]&&(this.$refs[t].player.stop(),this.trailer_path=" ",this.$refs[t+"poster"].style="display:none",clearTimeout(this.timer))},runTimeCalc:function(t){return function(t){t=Number(60*t);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),s=Math.floor(t%3600%60);return(e>0?e+" ساعة, ":"")+(n>0?n+" دقيقة, ":"")+(s>0?s+" ثانية":"")}(t)},GetSlide:function(t){var i,path="";for(i=0;i<t.length;i++)"THUMBNAIL"==t[i].size&&(path=t[i].path);return path}},mounted:function(){this.handleSearch()},props:{id:String,title:String,quality:String,poster:Array,trailer:String,genres:Array,watchCount:Number,audience:String,movieQuality:String,runtime:Number,run:Boolean,imdbId:String}},l=(n(336),n(16)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nuxt-link",{staticClass:"item-fade",attrs:{to:"/movie/"+t.title}},[n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img",loading:"/load.svg"},expression:"{ selector: 'img', loading: '/load.svg' }"}],staticClass:"item-slide",on:{mouseover:function(e){return t.runTrailer(t.id)},mouseleave:function(e){return t.stopTrailer(t.id)}}},[n("div",{staticClass:"poster"},[n("span",{staticClass:"quality"},[t._v(t._s(t.quality))]),t._v(" "),n("span",{staticClass:"views"},[t._v("\n        "+t._s(t.watchCount)+"\n        "),n("i",{staticClass:"far fa-eye"})]),t._v(" "),null!=t.films.imdbRating?n("span",{staticClass:"rate"},[t._v("\n        "+t._s(t.films.imdbRating)+" "),n("i",{staticClass:"far fa-star"})]):t._e(),t._v(" "),n("img",{attrs:{"data-src":t.GetSlide(t.poster),alt:t.title}})]),t._v(" "),n("div",{staticClass:"overlay"},[n("div",{staticClass:"information"},[n("h3",{staticClass:"name"},[t._v(t._s(t.title+" ("+t.year+")"))]),t._v(" "),n("div",{staticClass:"subinfo-block"},[n("span",{staticClass:"runtime"},[t._v("\n            "+t._s(t.runTimeCalc(t.runtime))+"\n          ")]),t._v(" "),n("span",{staticClass:"audience"},[t._v(t._s(t.audience)+" ")]),t._v(" "),n("div",{staticClass:"genres"},t._l(t.genres,(function(e){return n("i",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),0)])])])])])}),[],!1,null,"710d99b3",null);e.a=component.exports},336:function(t,e,n){"use strict";var r=n(327);n.n(r).a},337:function(t,e,n){(e=n(28)(!1)).push([t.i,".fade-enter-active[data-v-710d99b3],.fade-leave-active[data-v-710d99b3]{-webkit-transition:opacity .5s;transition:opacity .5s}.fade-enter[data-v-710d99b3],.fade-leave-to[data-v-710d99b3]{opacity:0}",""]),t.exports=e},381:function(t,e,n){var content=n(472);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(29).default)("5cc84ffc",content,!0,{sourceMap:!1})},471:function(t,e,n){"use strict";var r=n(381);n.n(r).a},472:function(t,e,n){(e=n(28)(!1)).push([t.i,"",""]),t.exports=e},580:function(t,e,n){"use strict";n.r(e);var r=Object.freeze(["\n                      query GetMovies($genre: String! , $items: Int , $lang: [String!], $ItemYearStart: DateTime!, $ItemYearEnd: DateTime!) {\n                      movies(orderBy: createdAt_DESC, first: $items, \n                      where :{ isPublished: true, lang: { name_in:$lang }, genres_some:{ name: $genre }\n                       AND: {\n                          releaseDate_gte: $ItemYearStart\n                          releaseDate_lte: $ItemYearEnd\n                        }}) {\n                        id\n                        title\n                        posters {\n                          size\n                          path\n                        }\n                        audience\n                        trailerPath\n                        movieQuality\n                        videoQualities\n                        runtime\n                        genres {\n                        id\n                          name\n                        }\n                        watchCount\n                      }\n                    }\n                    "]),l=Object.freeze(["\n                      query GetYears {\n                        movies(orderBy: createdAt_DESC) {\n                          id\n                          releaseDate\n                        }\n                      }\n                      "]),o=Object.freeze(["\n                        query GetQualities {\n                        movies(orderBy: createdAt_DESC) {\n                          id\n                          movieQuality\n                        }\n                      }\n\n                      "]),c=Object.freeze(["\n                    query GetLanguages {\n                      languages {\n                        id\n                        name\n                        }\n                      }\n                      "]),d=(n(23),n(103),n(104),n(136)),v=n(333),m={data:function(){return{items:12,years:[2019],Itemyear:"1000",ItemYearStart:"1000",ItemYearEnd:"5000",lang:["Arabic","English"],ItemQuality:["BLURAY"],scrolledToBottom:!1}},props:{genre:String},components:{TrailerItem:v.a,resultNotFound:d.a},methods:{scroll:function(){var t=this;window.onscroll=function(){window.pageYOffset+window.innerHeight+1>=document.documentElement.offsetHeight&&(t.items+=6)}},ChangeLang:function(t){this.lang=t.target.value,0==t.target.value&&(this.lang=["Arabic","English"])},ChangeYear:function(t){this.Itemyear=t.target.value,1e3==this.Itemyear?(this.ItemYearStart="1000",this.ItemYearEnd="5000"):(this.ItemYearStart=this.Itemyear+"-01-01T00:00:00.000Z",this.ItemYearEnd=this.Itemyear+"-12-31T00:00:00.000Z")},getReleaseYear:function(t){return t=new Date(t).getFullYear()},Getyears:function(t){for(var i=0;i<t.length;i++)this.years.includes(this.getReleaseYear(t[i].releaseDate))||this.years.push(this.getReleaseYear(t[i].releaseDate))},GetQualities:function(t){for(var i=0;i<t.length;i++){var e=(""+t[i].movieQuality).replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");this.ItemQuality.includes(e)||this.ItemQuality.push(e)}}},mounted:function(){this.scroll()}},f=(n(471),n(16)),h={components:{genres:Object(f.a)(m,(function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("div",{staticClass:"movies-genre"},[d("div",{staticClass:"container-fluid"},[d("div",{staticClass:"row"},[d("div",{staticClass:"col-12"},[d("div",{staticClass:"genre-title"},[t._v(t._s(t.genre))])])]),t._v(" "),d("div",{staticClass:"row"},[d("div",{staticClass:"col-12"},[d("ul",{staticClass:"filters"},[d("li",[d("ApolloQuery",{attrs:{query:function(t){return t(c)}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.result,l=r.loading,o=r.error,data=r.data;return[l?d("div",{staticClass:"loading apollo"},[d("img",{staticClass:"svg-load",attrs:{src:n(197),height:"32px",width:"32px"}})]):o?d("div",{staticClass:"error apollo"},[d("resultNotFound")],1):data&&data.languages.length>0?d("div",[d("select",{staticClass:"custom-select",on:{change:t.ChangeLang}},[d("option",{attrs:{value:"0",selected:""}},[t._v("اختر الغة")]),t._v(" "),t._l(data.languages,(function(e){return d("option",{key:e.id,domProps:{value:e.name}},[t._v(t._s(e.name))])}))],2)]):d("div",{staticClass:"no-result apollo"},[d("resultNotFound")],1)]}}])})],1),t._v(" "),d("li",[d("ApolloQuery",{attrs:{query:function(t){return t(o)}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.result,l=r.loading,o=r.error,data=r.data;return[l?d("div",{staticClass:"loading apollo"},[d("img",{staticClass:"svg-load",attrs:{src:n(197),height:"32px",width:"32px"}})]):o?d("div",{staticClass:"error apollo"},[d("resultNotFound")],1):data&&data.movies.length>0?d("div",{on:{mouseenter:function(e){return t.GetQualities(data.movies)}}},[d("select",{staticClass:"custom-select",on:{change:t.ChangeLang}},[d("option",{attrs:{value:"0",selected:""}},[t._v("اختر الجودة")]),t._v(" "),t._l(t.ItemQuality,(function(e){return d("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]):d("div",{staticClass:"no-result apollo"},[d("resultNotFound")],1)]}}])})],1),t._v(" "),d("li",[d("ApolloQuery",{attrs:{query:function(t){return t(l)}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.result,l=r.loading,o=r.error,data=r.data;return[l?d("div",{staticClass:"loading apollo"},[d("img",{staticClass:"svg-load",attrs:{src:n(197),height:"32px",width:"32px"}})]):o?d("div",{staticClass:"error apollo"},[d("resultNotFound")],1):data&&data.movies.length>0?d("div",{on:{mouseenter:function(e){return t.Getyears(data.movies)}}},[d("select",{staticClass:"custom-select",on:{change:t.ChangeYear}},[d("option",{attrs:{value:"1000",selected:""}},[t._v("اختر السنة")]),t._v(" "),t._l(t.years,(function(e){return d("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]):d("div",{staticClass:"no-result apollo"},[d("resultNotFound")],1)]}}])})],1)])])]),t._v(" "),d("ApolloQuery",{attrs:{query:function(t){return t(r)},variables:{genre:t.genre,items:t.items,lang:t.lang,ItemYearStart:t.ItemYearStart,ItemYearEnd:t.ItemYearEnd}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.result,l=r.loading,o=r.error,data=r.data;return[l?d("div",{staticClass:"loading apollo"},[d("img",{staticClass:"svg-load",attrs:{src:n(197),height:"32px",width:"32px"}})]):o?d("div",{staticClass:"error apollo"},[d("resultNotFound")],1):data&&data.movies.length>0?d("div",{staticClass:"row global-items"},t._l(data.movies,(function(t){return d("div",{key:t.id,staticClass:"col-xl-2 col-lg-3 col-md-3 col-6 global-item"},[d("TrailerItem",{attrs:{id:t.id,title:t.title,quality:t.movieQuality,poster:t.posters,trailer:t.trailerPath,genres:t.genres,watchCount:t.watchCount,audience:t.audience,videoQualities:t.videoQualities[0],runtime:t.runtime,run:!1}})],1)})),0):d("div",{staticClass:"no-result apollo"},[d("resultNotFound")],1)]}}])})],1)])}),[],!1,null,null,null).exports}},y=Object(f.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("genres",{attrs:{genre:this.$route.params.name}})],1)}),[],!1,null,null,null);e.default=y.exports}}]);